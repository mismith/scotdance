"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}angular.module("XXXXXX",["ui.router","ui.router.title","firebaseHelper","ngHandsontable"]).config(["$locationProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$stateProvider","$firebaseHelperProvider","$provide",function(e,t,a,r,n){e.html5Mode(!0).hashPrefix("!"),t.when("","/"),t.when("home","/"),a.strictMode(!1);var o=["home"];r.state("main",{"abstract":!0,templateUrl:"views/main.html"}).state("page",{parent:"main",url:"/{page:|"+o.join("|")+"}",templateUrl:function(e){return"views/page/"+(e.page||"home")+".html"},resolve:{$title:["$stateParams",function(e){switch(e.page){case"":case"home":return"";default:return e.page[0].toUpperCase()+e.page.slice(1)}}]}}).state("404",{parent:"main",templateUrl:"views/page/404.html"}),t.otherwise(function(e,t){var a=e.get("$state");return a.go("404",null,{location:!1}),t.path()}),n.namespace("scotdance")}]).controller("AppCtrl",["$rootScope","$scope","$state","$firebaseHelper","$timeout",function(e,t,a,r,n){e.$state=a,r.hotTable=function(){var e=r.ref.apply(this,arguments);return o={parse:function(t){n(function(){o.revisions?console.info(o.revisions+" revision"+(1===o.revisions?" has":"s have")+" been made to this reference since you last saved:",e.path.toString()):!function(){var e,a=t.exportVal(),r=Object.keys(a).map(function(e){var t=angular.copy(a[e]);return t.$id=e,t});(e=o.data).splice.apply(e,[0,o.data.length].concat(_toConsumableArray(r)))}(),o.revisions++})},init:function(){e.orderByPriority().on("value",o.parse)},refresh:function(){o.revisions=0,e.orderByPriority().once("value",o.parse)},save:function(){var t={};o.data.map(function(e){var a=e.$id;delete e.$id,a&&(t[a]=e)}),console.log("saving",t),o.revisions=0,e.update(t)},revisions:0,data:[]},o.init(),o};var o=t.fbHot=r.hotTable("competitionsData/idc0/dancers"),i=t.data=o.data;t.settings={data:i,columns:[{data:"number",title:"#",readOnly:!0},{data:"firstName",title:"First Name"},{data:"lastName",title:"Last Name"},{data:"location",title:"Location"}],minSpareRows:1,undo:!0,contextMenu:["remove_row","---------","undo"]}}]);