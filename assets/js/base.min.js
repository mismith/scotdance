angular.module("bigContentful",["contentful","hc.marked"]).directive("contentfulBg",function(){var e="background";return{restrict:"A",link:function(t,n,r){t.$watch(function(){return t.$eval(r.contentfulBg)||t.$contentfulEntry},function(t){t&&t.fields&&t.fields[e]&&t.fields[e].fields&&t.fields[e].fields.file&&t.fields[e].fields.file.url&&n.css({backgroundImage:"url("+t.fields[e].fields.file.url+")"})})}}}),angular.module("bigScroll",["duScroll"]).provider("$scrollTo",function(){var e=void 0;this.setDefaultHeaderOffset=function(t){e=t},this.$get=["$rootScope","$location","$anchorScroll","$timeout","$document",function(t,n,r,i,o){var c=function(t,n,r){return angular.isString(t)&&(t=document.getElementById(t)),o.scrollTo(t,void 0===n?void 0===e?document.getElementById("header").offsetHeight:e:n,void 0===r?600:r)},l=!1,a=function(e,t){if(!l){e&&(l=!1);var r=n.hash();r?i(function(){c(r,void 0,t)}):c(null,0,0)}};return t.$on("$viewContentLoaded",function(){l=!1,o.one("mousewheel",function(){l=!0}),a(!0)}),t.$on("$stateChangeSuccess",function(){a(!0)}),t.$on("bigScrollRefresh",function(){a(void 0,0)}),c}]}).directive("img",["$rootScope",function(e){return{restrict:"E",link:function(t,n,r){r.height||(n[0].onload=function(){e.$emit("bigScrollRefresh")})}}}]).directive("a",["$location","$scrollTo",function(e,t){return{restrict:"E",link:function(n,r,i){r.on("click",function(n){if(i.href&&("/"==i.href[0]&&e.path()==i.href.substring(0,i.href.indexOf("#"))&&i.href.indexOf("#")>=0||"#"==i.href[0])){n.preventDefault();var r=i.href.substring(i.href.lastIndexOf("#")+1);t(r)}})}}}]),angular.module("bigSlider",[]).directive("bigSlider",["$window",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="big-slider" style="overflow: hidden;" ng-transclude></div>'}}]).directive("bigSliderSlides",["$window",function(e){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="big-slider-slides" style="display: flex; flex-direction: row; transform: translate3d(0,0,0); transition: transform 300ms ease-in-out;" ng-transclude></div>',link:function(t,n){function r(){return o=n[0].parentNode.offsetWidth}function i(e){e=e||o,n.css({width:c*e+"px"}).children().css({width:e+"px"})}var o=0,c=0,l=0;angular.element(e).bind("resize",function(){r(),i()}),r(),t.$watch(function(){return n.children().length},function(e){c=e,i()}),t.index=function(){return l},t.slide=function(e){l=e%c,0>l&&(l+=c),n.css({transform:"translate3d("+-o*l+"px,0,0)"})},t.next=function(){t.slide(l+1)},t.prev=function(){t.slide(l-1)}}}}]).directive("bigSliderSlide",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<article class="big-slider-slide" ng-transclude></article>'}}).directive("bigSliderNav",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<nav class="big-slider-nav" ng-transclude></nav>'}}),angular.module("bigUtil",[]).run(["$rootScope","$document",function(e,t){FastClick.attach(document.body),viewportUnitsBuggyfill.init();var n=e.$menu={active:!1,open:function(){n.active=!0},close:function(){n.active=!1},toggle:function(e){console.log("tog"),n.active=!n.active,e&&e.stopPropagation()}};t.on("click",function(){n.close()})}]).filter("length",function(){return function(e){return angular.isArray(e)?e.length:angular.isObject(e)?Object.keys(e).filter(function(e){return"$"!=e[0]}).length:0}}).filter("unique",function(){return function(e,t){if(!e)return e;for(var n={},r=[],i=0;i<e.length;i++)n[angular.isFunction(t)?t(e[i]):e[i][t]]=e[i];for(var o in n)r.push(n[o]);return r}}),angular.module("bigWordpress",[]).provider("$wp",function(){var e="/wp/api/";this.setApiBase=function(t){e=t},this.$get=["$http","$q",function(t,n){var r=this;r.proper_date=function(e){return(e||"").replace(" ","T")},r.custom_field=function(e,t){try{return e.custom_fields[t][0]}catch(n){return void 0}},r.thumbnail_image=function(e,t){try{return e.thumbnail_images[t||"full"].url}catch(n){try{return e.attachments[0].url}catch(n){return void 0}}},r.api=function(r,i){var o=n.defer();return t.get(e+r,{params:i}).success(function(e){e&&"ok"==e.status?o.resolve(e):o.reject()}).error(function(){o.reject()}),o.promise},r.posts=function(e,t,n){var i=1,o=10;e.loading=!1,e.fetchedAll=!1,e.fetchPosts=function(c){return e.loading||e.fetchedAll?void 0:(e.loading=!0,r.api(n||"get_category_posts",angular.extend({count:o,page:i},t)).then(function(t){angular.forEach(t.posts,function(e){c.push(e)}),i<t.pages?i++:e.fetchedAll=!0}).catch(function(t){e.fetchedAll=!0,console.error(t)}).finally(function(){e.loading=!1}))}};var i={};return r.cache=function(e,t){return t&&(i[e]=t),i[e]},r}]}).controller("WordpressCtrl",["$rootScope","$scope","$wp",function(e,t,n){t.posts=[],t.setCategory=function(r,i){i=i||"publication",n.posts(t,{id:r,post_type:i});var o=i+"/"+r,c=n.cache(o);return c?t.posts=c:(t.fetchPosts(t.posts).then(function(){e.$emit("bigScrollRefresh"),n.cache(o,t.posts)}),void 0)},t.hasCategory=function(e,t){var n=!1;return e&&e.categories&&angular.forEach(e.categories,function(e){return n?void 0:e.id==t?n=!0:void 0}),n},t.proper_date=n.proper_date,t.custom_field=n.custom_field,t.thumbnail_image=n.thumbnail_image}]),angular.module("XXXXXX",["ui.router","ui.router.title","firebaseHelper","bigUtil","bigScroll","bigSlider","bigWordpress","bigContentful"]).config(["$locationProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$stateProvider","$firebaseHelperProvider","contentfulProvider",function(e,t,n,r,i,o){e.html5Mode(!0).hashPrefix("!"),t.when("","/"),t.when("home","/"),n.strictMode(!1);var c=["home"];r.state("main",{"abstract":!0,templateUrl:"views/main.html"}).state("page",{parent:"main",url:"/{page:|"+c.join("|")+"}",templateUrl:function(e){return"views/page/"+(e.page||"home")+".html"},resolve:{$title:["$stateParams",function(e){switch(e.page){case"":case"home":return"";default:return e.page[0].toUpperCase()+e.page.slice(1)}}]}}).state("404",{parent:"main",templateUrl:"views/page/404.html"}),t.otherwise(function(e,t){var n=e.get("$state");return n.go("404",null,{location:!1}),t.path()}),i.namespace("demo"),o.setOptions({accessToken:"XXXXXX",space:"XXXXXX"})}]).controller("AppCtrl",["$rootScope","$state",function(e,t){e.$state=t}]).controller("HomePageCtrl",["$scope","$firebaseHelper","contentful",function(e,t,n){e.angularWorking="Yes",t.load("example").then(function(){e.firebaseWorking=!0}),n.entries("order=sys.createdAt").then(function(t){e.entries=t.data.items})}]);