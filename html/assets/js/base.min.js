"use strict";angular.module("bigContentful",["contentful","hc.marked"]).directive("contentfulBg",function(){var e="background";return{restrict:"A",link:function(t,n,i){t.$watch(function(){return t.$eval(i.contentfulBg)||t.$contentfulEntry},function(t){t&&t.fields&&t.fields[e]&&t.fields[e].fields&&t.fields[e].fields.file&&t.fields[e].fields.file.url&&n.css({backgroundImage:"url("+t.fields[e].fields.file.url+")"})})}}}),angular.module("bigScroll",["duScroll"]).provider("$scrollTo",function(){var e=void 0;this.setDefaultHeaderOffset=function(t){e=t},this.$get=["$rootScope","$location","$anchorScroll","$timeout","$document",function(t,n,i,r,o){var a=function(t,n,i){return angular.isString(t)&&(t=document.getElementById(t)),o.scrollTo(t,void 0===n?void 0===e?document.getElementById("header").offsetHeight:e:n,void 0===i?600:i)},c=!1,l=function(e,t){if(!c){e&&(c=!1);var i=n.hash();i?r(function(){a(i,void 0,t)}):a(null,0,0)}};return t.$on("$viewContentLoaded",function(){c=!1,o.one("mousewheel",function(){c=!0}),l(!0)}),t.$on("$stateChangeSuccess",function(){l(!0)}),t.$on("bigScrollRefresh",function(){l(void 0,0)}),a}]}).directive("img",["$rootScope",function(e){return{restrict:"E",link:function(t,n,i){i.height||(n[0].onload=function(){e.$emit("bigScrollRefresh")})}}}]).directive("a",["$location","$scrollTo",function(e,t){return{restrict:"E",link:function(n,i,r){i.on("click",function(n){if(r.href&&("/"==r.href[0]&&e.path()==r.href.substring(0,r.href.indexOf("#"))&&r.href.indexOf("#")>=0||"#"==r.href[0])){n.preventDefault();var i=r.href.substring(r.href.lastIndexOf("#")+1);t(i)}})}}}]),angular.module("bigSlider",[]).directive("bigSlider",["$window",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="big-slider" style="overflow: hidden;" ng-transclude></div>'}}]).directive("bigSliderSlides",["$window",function(e){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="big-slider-slides" style="display:-webkit-flex; display:-ms-flexbox; display:flex; -webkit-flex-direction:row; -ms-flex-direction:row; flex-direction: row; -webkit-transform: translate3d(0,0,0); -ms-transform: translate3d(0,0,0); transform: translate3d(0,0,0); transition: all 300ms ease-in-out;" ng-transclude></div>',link:function(t,n,i){function r(){return t.$eval(i.columns)||1}function o(){return c=n[0].parentNode.offsetWidth/r()}function a(e){e=e||c,n.css({width:l*e+"px"}).children().css({width:e+"px"})}var c=0,l=0,u=0;angular.element(e).bind("resize",function(){o(),a()}),o(),t.$watch(function(){return n.children().length},function(e){l=e,a()}),t.index=function(){return u},t.isVisible=function(e){return e>=u&&e<u+r()},t.slide=function(e){u=e%l,0>u?u=l-r():e+r()>l&&(u=0);var t="translate3d("+-c*u+"px,0,0)";n.css({webkitTransform:t,msTransform:t,transform:t})},t.next=function(){t.slide(u+1)},t.prev=function(){t.slide(u-1)}}}}]).directive("bigSliderSlide",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<article class="big-slider-slide" ng-class="{visible: isVisible($index)}" ng-transclude></article>'}}).directive("bigSliderNav",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<nav class="big-slider-nav" ng-transclude></nav>'}}),angular.module("bigUtil",[]).run(["$rootScope","$document",function(e,t){FastClick.attach(document.body),viewportUnitsBuggyfill.init();var n=e.$menu={active:!1,open:function(){n.active=!0},close:function(){n.active=!1},toggle:function(e){n.active=!n.active,e&&e.stopPropagation()}};t.on("click",function(){e.$apply(n.close)}),t.on("keyup",function(t){e.$apply(function(){27===t.keyCode&&n.close()})});var i=e.$modal={active:!1,open:function(e){i.active=e},close:function(){i.active=!1},toggle:function(e){i.active=i.active===e?!1:e},isOpen:function(e){return i.active===e}};e.$watch("$modal.active",function(e){angular.element(document.body).css({overflow:e?"hidden":""})}),t.on("keyup",function(t){e.$apply(function(){27===t.keyCode&&i.close()})})}]).filter("length",function(){return function(e){return angular.isArray(e)?e.length:angular.isObject(e)?Object.keys(e).filter(function(e){return"$"!=e[0]}).length:0}}).filter("unique",function(){return function(e,t){if(!e)return e;for(var n={},i=[],r=0;r<e.length;r++)n[angular.isFunction(t)?t(e[r]):e[r][t]]=e[r];for(var o in n)i.push(n[o]);return i}}).directive("bigClickToggle",["$parse",function(e){return{restrict:"A",link:function(t,n,i){var r=t.$eval(i.bigClickToggle);n.on("click",function(n){n.preventDefault(),t.$apply(function(){angular.forEach(r,function(n,i){return e(i).assign(t,n)})})}),angular.forEach(r,function(e,r){t.$watch(r,function(r){void 0!==r&&n[e===r?"addClass":"removeClass"](t.$eval(i.bigClickToggleActive)||"active")})})}}}]),angular.module("bigWordpress",[]).provider("$wp",function(){var e="/wp/api/";this.setApiBase=function(t){e=t},this.$get=["$http","$q",function(t,n){var i=this;i.proper_date=function(e){return(e||"").replace(" ","T")},i.custom_field=function(e,t){try{return e.custom_fields[t][0]}catch(n){return void 0}},i.thumbnail_image=function(e,t){try{return e.thumbnail_images[t||"full"].url}catch(n){try{return e.attachments[0].url}catch(n){return void 0}}},i.api=function(i,r){var o=n.defer();return angular.isString(r)&&(i+="?"+r,r={}),t.jsonp(e+i,{params:angular.extend({callback:"JSON_CALLBACK"},r||{})}).then(function(e){e&&e.data&&"ok"==e.data.status?o.resolve(e.data):o.reject()})["catch"](function(){o.reject()}),o.promise},i.posts=function(e,t,n){var r=1,o=10;e.loading=!1,e.fetchedAll=!1,e.fetchPosts=function(a){return e.loading||e.fetchedAll?void 0:(e.loading=!0,i.api(n||"get_category_posts",angular.extend({count:o,page:r},t)).then(function(t){angular.forEach(t.posts,function(e){a.push(e)}),r<t.pages?r++:e.fetchedAll=!0})["catch"](function(t){e.fetchedAll=!0,console.error(t)})["finally"](function(){e.loading=!1}))}};var r={};return i.cache=function(e,t){return t&&(r[e]=t),r[e]},i}]}).directive("wpPost",["$wp",function(e){return{link:function(t,n,i){t.$wpPost={$loading:!0},i.$observe("wpPost",function(n){var i=t.$eval(n);i&&e.api("get_post",i).then(function(e){t.$wpPost=e.post})["catch"](function(e){t.$wpPost.$loading=!1,t.$wpPost.$error=e,console.error(e)})})}}}]).controller("WordpressCtrl",["$rootScope","$scope","$wp",function(e,t,n){t.posts=[],t.setCategory=function(i,r){r=r||"publication",n.posts(t,{id:i,post_type:r});var o=r+"/"+i,a=n.cache(o);return a?t.posts=a:(t.fetchPosts(t.posts).then(function(){e.$emit("bigScrollRefresh"),n.cache(o,t.posts)}),void 0)},t.hasCategory=function(e,t){var n=!1;return e&&e.categories&&angular.forEach(e.categories,function(e){return n?void 0:e.id==t?n=!0:void 0}),n},t.proper_date=n.proper_date,t.custom_field=n.custom_field,t.thumbnail_image=n.thumbnail_image}]),angular.module("XXXXXX",["ui.router","ui.router.title","firebaseHelper","bigUtil","bigScroll","bigSlider","bigWordpress","bigContentful"]).config(["$locationProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$stateProvider","$firebaseHelperProvider","contentfulProvider",function(e,t,n,i,r,o){e.html5Mode(!0).hashPrefix("!"),t.when("","/"),t.when("home","/"),n.strictMode(!1);var a=["home"];i.state("main",{"abstract":!0,templateUrl:"views/main.html"}).state("page",{parent:"main",url:"/{page:|"+a.join("|")+"}",templateUrl:function(e){return"views/page/"+(e.page||"home")+".html"},resolve:{$title:["$stateParams",function(e){switch(e.page){case"":case"home":return"";default:return e.page[0].toUpperCase()+e.page.slice(1)}}]}}).state("404",{parent:"main",templateUrl:"views/page/404.html"}),t.otherwise(function(e,t){var n=e.get("$state");return n.go("404",null,{location:!1}),t.path()}),r.namespace("demo"),o.setOptions({accessToken:"XXXXXX",space:"XXXXXX"})}]).controller("AppCtrl",["$rootScope","$scope","$state","$firebaseHelper","contentful",function(e,t,n,i,r){e.$state=n,t.angularWorking="Yes",i.load("example").then(function(){t.firebaseWorking=!0}),r.entries("order=sys.createdAt").then(function(e){t.entries=e.data.items})}]);